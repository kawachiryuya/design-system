# レスポンシブデザインの原則

## メタ情報
- カテゴリ: 基盤原則
- 適用範囲: 全階層（Atom〜Page）
- ステータス: Approved
- 最終更新: 2024-02-17

## 原則の定義

**あらゆる画面サイズで同等の価値を提供する。デバイスに合わせてコンテンツを削るのではなく、最適な形に変える**

レスポンシブデザインとは単に「縦横を切り替える」ことではありません。ユーザーがどのデバイスを使っていても、同じ目的を同じように達成できることが目標です。

## なぜレスポンシブが必要か

### ユーザーの多様性

- スマートフォンからのアクセスが全体の50〜60%を占める
- 同一ユーザーが状況に応じてデバイスを使い分ける
- 画面サイズは320pxから2560px以上まで多岐にわたる

### 固定幅レイアウトの問題

```
固定幅レイアウト:
モバイルで横スクロールが発生 → ユーザーが離脱
デスクトップで余白が広すぎる → 読みにくい
```

## モバイルファースト

### 考え方

モバイルから設計を始め、画面が大きくなるにつれて拡張する。

```
❌ デスクトップファースト（避けるべき）:
「完全なデザインを作って、モバイルでは削る」
→ 何を削るかの判断が後手になる
→ 重要な情報が埋もれがち

✅ モバイルファースト（推奨）:
「本当に必要なものだけを並べ、余裕ができたら追加する」
→ コンテンツの優先度が自然に決まる
→ パフォーマンスも改善しやすい
```

### なぜモバイルを起点にするか

モバイルは制約が多い（小さい画面、低速回線、指での操作）。制約の多い環境から考えることで、**本当に必要な情報・機能が絞り込まれる**。デスクトップへの拡張は「追加」なので判断が容易。

### 実装の基本

```css
/* ✅ モバイルファースト（min-width） */
.element { width: 100%; }               /* xs: デフォルト */
@media (min-width: 768px) { ... }       /* md以上に拡張 */

/* ❌ デスクトップファースト（max-width） */
.element { width: 50%; }
@media (max-width: 767px) { width: 100%; }
```

→ ブレークポイントの定義は [Grid](../layout/grid.md) 参照

## コンテンツ優先

### 画面サイズで「削らない」

モバイルでコンテンツを非表示にすることは、原則として避ける。

```
❌ 悪い例: モバイルでサイドバーを display: none
→ サイドバーの情報はモバイルユーザーには不要、という思い込み

✅ 良い例: サイドバーをメインコンテンツの下に移動
→ すべてのユーザーに同じ情報を提供
```

**例外**: 純粋な装飾要素（背景イラスト、装飾的なアニメーション等）は非表示にしてよい。

### 優先度に基づく配置変化

同じコンテンツを、画面サイズに応じて最適な位置・順序で表示する。

```
デスクトップ:
┌──────────────┬──────────┐
│  メイン記事   │ 関連記事 │
│              │ 広告     │
└──────────────┴──────────┘

モバイル:
┌──────────────┐
│  メイン記事   │  ← 最優先コンテンツ
└──────────────┘
┌──────────────┐
│  関連記事     │  ← 次に重要
└──────────────┘
```

コンテンツの重要度は [Hierarchy](./hierarchy.md) の原則に従って決定する。

## レイアウトの変化パターン

### よく使う3つのパターン

**1. カラム数の変化**

```
モバイル → タブレット → デスクトップ
1列      →   2列     →   3〜4列
```

カードグリッド、商品一覧、ギャラリー等で使用。

**2. サイドバーの移動**

```
デスクトップ: メイン(左) + サイドバー(右)
モバイル:    メイン(上) → サイドバー(下)
```

ブログ、ドキュメント、ECサイト等で使用。

**3. ナビゲーションの変化**

```
デスクトップ: 横並びナビ
モバイル:    ハンバーガーメニュー or タブバー
```

→ 詳細は [Navigation Pattern](../patterns/navigation.md)（未作成）参照

### レイアウト変化の実装指針

```
✅ 良い判断基準:
- コンテンツが窮屈になる前に変化させる
- 文字の読みやすさを維持する（行長25〜35文字）
- タッチ操作のしやすさを維持する

❌ 悪い判断基準:
- 「スマホだから縦にする」という機械的な判断
- ピクセル数だけで判断する
```

## タッチ操作への対応

### 指での操作を前提にする

マウスと指では操作精度が大きく異なる。モバイルでは以下を必ず考慮する。

**タッチターゲットサイズ**:
- インタラクティブ要素は最小 44px × 44px
- 隣接する要素との間隔は最小 8px

→ 詳細は [Touch Targets](./accessibility/touch-targets.md) 参照

**ホバー状態への依存を避ける**:

```
❌ 悪い例: ホバー時にだけ表示されるアクションボタン
→ タッチデバイスではホバーが存在しない

✅ 良い例: 常に表示、またはタップで展開
→ すべてのデバイスで操作可能
```

**スワイプ・スクロールとの競合**:

- 横スワイプで操作するUIは、ページスクロールと競合しやすい
- 明確な視覚的手がかりを提供する
- キャンセル可能にする

## パフォーマンス

レスポンシブ対応はパフォーマンスと密接に関係する。

### 画像

```
❌ 悪い例: 大きな画像をCSSで縮小表示
→ 不要なデータをモバイルで読み込む

✅ 良い例: srcset で画面サイズに応じた画像を配信
<img
  src="image-800.jpg"
  srcset="image-400.jpg 400w, image-800.jpg 800w"
  sizes="(max-width: 640px) 100vw, 50vw"
/>
```

### 非表示要素

```
❌ 悪い例: display: none で隠しても読み込まれる
→ 帯域を無駄に消費

✅ 良い例: 条件付きレンダリング
→ モバイルで不要なものはそもそも読み込まない
```

## チェックリスト

### 設計時

- [ ] モバイルから設計を始めた（モバイルファースト）
- [ ] モバイルで非表示にした要素がない（装飾以外）
- [ ] コンテンツの優先順位がモバイルレイアウトに反映されている
- [ ] タッチターゲットが 44px × 44px 以上

### 実装時

- [ ] min-width を使ったモバイルファーストなCSS
- [ ] 定義されたブレークポイント（xs/sm/md/lg/xl）のみ使用
- [ ] ホバーだけに依存した操作がない
- [ ] 画像に srcset を設定している
- [ ] 実機（iOS・Android）で動作確認済み

### 確認すべき画面サイズ

- [ ] 320px（小型スマートフォン）
- [ ] 375px（iPhone標準）
- [ ] 768px（タブレット縦）
- [ ] 1024px（タブレット横・小型ノートPC）
- [ ] 1440px（一般的なデスクトップ）

## 関連原則

- **[Grid](../layout/grid.md)**: ブレークポイントの定義、モバイルファーストの実装
- **[Spacing](../layout/spacing.md)**: 画面サイズ別の余白変化
- **[Hierarchy](./hierarchy.md)**: コンテンツ優先度の決定
- **[Consistency](./consistency.md)**: デバイス間での一貫した体験
- **[Touch Targets](./accessibility/touch-targets.md)**: タッチ操作のサイズ要件

## バージョン履歴

| 日付 | バージョン | 変更内容 | 変更理由 |
|------|-----------|----------|----------|
| 2024-02-17 | 1.0.0 | 初版作成 | Phase 2 |
