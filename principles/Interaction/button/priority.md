# ボタン優先度の原則

## メタ情報
- カテゴリ: インタラクション原則（基盤）
- 適用範囲: Atom〜Page
- ステータス: Approved
- 最終更新: 2024-01-15

## 原則の定義

**ボタンをPrimary、Secondary、Tertiaryの3つの優先度に分類し、視覚的ヒエラルキーを通じてユーザーの意思決定を支援する**

ボタンの優先度分類は、ユーザーが「何をすべきか」を直感的に理解できるようにするための基本的な設計原則です。適切な優先度付けにより、認知負荷を軽減し、タスク完了率を向上させます。

## 背景と目的

### なぜこの原則が必要か

優先度が明確でないボタン配置は、以下の問題を引き起こします：

- **意思決定の遅延**: どのボタンを押すべきか迷う
- **誤操作の増加**: 重要でないボタンを誤ってクリック
- **タスク放棄**: 目的のアクションが見つからず離脱
- **認知負荷**: すべてのボタンを読んで理解する必要がある

明確な優先度付けにより、ユーザーは瞬時に最も重要なアクションを認識し、自信を持って操作できます。

## ボタンの優先度分類

### Primary（主要アクション）

**定義**: ユーザーがそのページ・画面で達成したい主目的のアクション

#### 特徴

- **視覚的**: 塗りつぶし、ブランドカラー、最も目立つ
- **配置**: 配置方向において最も目に入りやすい位置（横並び: 右端、縦並び: 上端）
- **個数**: 1画面に1つが原則
- **ラベル**: 動詞で始まる明確な行動指示

#### 典型的な例

| コンテキスト | Primaryアクション |
|------------|-----------------|
| フォーム | 「保存」「送信」「登録」 |
| Eコマース | 「購入」「カートに追加」 |
| マルチステップ | 「次へ」「完了」 |
| 認証 | 「ログイン」「サインアップ」 |
| 編集 | 「保存」「更新」 |
| 削除確認 | 「キャンセル」（安全な選択）|

#### いつ使うか

- [ ] ユーザーの主目的を達成するアクション
- [ ] フローを前進させるアクション
- [ ] ページの最も重要なCTA（Call to Action）

#### 使わない場合

- ❌ 破壊的アクション（削除、アカウント削除等）
- ❌ 1つの画面に複数のPrimary（ユーザーが迷う）
- ❌ 副次的なアクション（詳細表示、ヘルプ等）

### Secondary（補助アクション）

**定義**: Primaryに次ぐ重要度のアクション、代替の選択肢

#### 特徴

- **視覚的**: アウトラインのみ、または控えめな背景色
- **配置**: Primaryの近くだが、やや控えめな位置
- **個数**: 0〜2個程度
- **関係**: Primaryと対になることが多い

#### 典型的な例

| コンテキスト | Secondaryアクション |
|------------|-------------------|
| フォーム | 「キャンセル」「リセット」 |
| マルチステップ | 「戻る」「スキップ」 |
| 編集 | 「下書き保存」「プレビュー」 |
| 削除確認 | 「削除」（破壊的アクション）|
| Eコマース | 「お気に入りに追加」 |

#### いつ使うか

- [ ] Primaryの代替となるアクション
- [ ] フローから離脱するアクション（キャンセル）
- [ ] 補助的だが重要なアクション
- [ ] 破壊的アクション（慎重に扱う必要がある）

#### 使わない場合

- ❌ ページの主目的となるアクション
- ❌ ユーザーが必ず実行すべきアクション

### Tertiary（その他のアクション）

**定義**: 補助的・付加的なアクション

#### 特徴

- **視覚的**: テキストリンク、アイコンのみ、最も控えめ
- **配置**: メインフローの外、またはコンテンツ内
- **個数**: 制限なし（ただし過度は避ける）
- **目的**: メインのフローを邪魔しない

#### 典型的な例

| コンテキスト | Tertiaryアクション |
|------------|------------------|
| フォーム | 「ヘルプ」「使い方を見る」 |
| カード | 「詳細を見る」「シェア」 |
| テーブル | 「編集」「複製」「削除」（行ごと）|
| ページ全体 | 「設定」「フィードバック」 |

#### いつ使うか

- [ ] 必須ではない付加的なアクション
- [ ] コンテキストメニュー的な操作
- [ ] ページ全体で常に利用可能な機能

#### 使わない場合

- ❌ ユーザーが必ず実行すべきアクション
- ❌ フローの完了に必要なアクション

## 視覚的ヒエラルキーの実装

### 色とコントラスト

```
Primary:
  背景: ブランドカラー（例: blue-600）
  テキスト: 白
  コントラスト: 最も高い

Secondary:
  背景: 透明または薄いグレー
  境界線: グレーまたはブランドカラー
  テキスト: ブランドカラーまたはグレー
  コントラスト: 中程度

Tertiary:
  背景: 透明
  境界線: なし
  テキスト: リンク色またはグレー
  コントラスト: 控えめ
```

### サイズ

同じコンテキスト内では、基本的に同じサイズを使用。ただし、特別に強調したい場合のみPrimaryを大きくする。

```
標準: すべて medium
強調: Primary large、他は medium
```

### 配置順序

**横並び**: 優先度の低い順（左から右）
```
[ Tertiary ] [ Secondary ] [ Primary ]
```

**縦並び**: 優先度の高い順（上から下）
```
[ Primary ]
[ Secondary ]
[ Tertiary ]
```

→ 詳細は [Action Placement](./action-placement.md) 参照

## 破壊的アクションの扱い

### 定義

ユーザーのデータやコンテンツを削除・破壊するアクション

**例**: 「削除」「アカウント削除」「すべてクリア」「リセット」

### 優先度の決定

**原則**: 破壊的アクションは常にSecondaryまたはTertiaryとして扱う

**例外**: 削除確認ダイアログでは、安全な選択（キャンセル）をPrimaryとする

```
削除確認ダイアログ:
[ 削除(Secondary) ] [ キャンセル(Primary) ]

理由: 
- ユーザーの意図しない削除を防ぐ
- 安全な選択を目立たせる
- 一度立ち止まって考える時間を与える
```

### 視覚的な警告

破壊的アクションには、色で警告を示す

```typescript
// 破壊的Secondary
<Button variant="secondary-destructive">削除</Button>

// スタイル例
background: transparent
border: red-600
text: red-600
hover: bg-red-50
```

→ 詳細は [Color Meaning](../color/color-meaning.md) 参照

## 特殊ケース

### 1つのアクションのみ

Primaryとして扱う

```
[ Primary ]

例: 「閉じる」「OK」「理解しました」
```

### 同等の重要度を持つ2つのアクション

どちらもSecondaryとして扱い、コンテキストで判断を促す

```
[ Secondary ] [ Secondary ]

例: 「保存して終了」「保存して続ける」
```

ただし、可能な限りどちらか1つをPrimaryにする方が望ましい。

### 複数のPrimaryが必要に見える場合

**問題**: 1画面に複数のPrimaryが必要に見える

**解決策**:
1. **画面を分割**: 別々のページ・ステップにする
2. **コンテキストを明確化**: どれが主目的か再検討
3. **カード分割**: 各カードに1つのPrimaryを配置

## 測定方法

### チェックリスト

- [ ] 1画面にPrimaryは1つのみ
- [ ] Primaryは最も目立つスタイル
- [ ] Secondaryは控えめなスタイル
- [ ] 破壊的アクションはSecondary以下
- [ ] 削除確認では安全な選択をPrimary
- [ ] ボタンラベルが明確（動詞で始まる）
- [ ] 優先度と視覚的ヒエラルキーが一致

### ユーザビリティテスト

- **タスク完了率**: Primaryの適切な配置で向上
- **時間計測**: 意思決定にかかる時間
- **誤操作率**: 間違ったボタンのクリック回数
- **ヒートマップ**: ユーザーの視線がPrimaryに集中しているか

## 関連原則

- **[Action Placement](./action-placement.md)**: ボタンの配置順序
- **[Color Meaning](../color/color-meaning.md)**: 破壊的アクションの色
- **[States](./states.md)**: ボタンの状態管理
- **[Accessibility](../foundation/accessibility.md)**: フォーカス順序

## 関連コンポーネント

- **Button**: Primary/Secondary/Tertiaryのバリエーション実装
- **ButtonGroup**: 複数ボタンの配置

## デザイントークンとの関係

```typescript
// tokens/button.ts
export const buttonVariants = {
  primary: {
    background: colors.brand.primary[600],
    text: colors.neutral.white,
    hover: colors.brand.primary[700],
  },
  secondary: {
    background: 'transparent',
    border: colors.neutral.gray[300],
    text: colors.neutral.gray[900],
    hover: colors.neutral.gray[50],
  },
  tertiary: {
    background: 'transparent',
    border: 'none',
    text: colors.brand.primary[600],
    hover: colors.brand.primary[50],
  },
  'secondary-destructive': {
    background: 'transparent',
    border: colors.semantic.error[600],
    text: colors.semantic.error[600],
    hover: colors.semantic.error[50],
  },
} as const;
```

## バージョン履歴

| 日付 | バージョン | 変更内容 | 変更理由 |
|------|-----------|----------|----------|
| 2024-01-15 | 1.0.0 | 初版作成 | ボタン優先度分類の体系化 |
| 2026-02-20 | 1.1.0 | Primary「配置」の説明を修正 | placement.mdの概念整合に合わせ「終点」を「最も目に入りやすい位置」に変更 |
