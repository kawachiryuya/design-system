# トースト通知

## メタ情報
- カテゴリ: インタラクション原則 > Feedback
- 適用範囲: Page
- ステータス: Approved
- 最終更新: 2024-02-17

## 原則の定義

**ユーザーの作業を中断させずに、操作結果を一時的に伝える**

トースト通知は画面の端に一時的に表示され、ユーザーの操作を妨げません。確認を必要としない軽量なフィードバックに適しています。

## いつ使うか・使わないか

### 使う場面

- ✅ 操作の成功（保存完了、送信完了、コピー完了）
- ✅ 軽微なエラー（ネットワーク一時切断など、後で再試行可能）
- ✅ 取り消し可能なアクション（削除完了 + 「元に戻す」）
- ✅ 自動処理の完了通知

### 使わない場面

- ❌ 即座の対応が必要なエラー → インラインエラーまたはモーダルを使う
- ❌ 複数の情報を伝える必要がある → モーダルを使う
- ❌ ユーザーの確認が必要なアクション → 確認ダイアログを使う
- ❌ フォームのバリデーションエラー → インラインバリデーションを使う

## 表示の仕様

### 位置

```
デスクトップ: 画面右下（または右上）
モバイル: 画面下部（フルwidth）

┌─────────────────────────┐
│                         │
│      ページコンテンツ     │
│                         │
│              ┌─────────┐│
│              │ トースト ││  ← デスクトップ
│              └─────────┘│
└─────────────────────────┘
┌─────────────────────────┐
│ トースト（フルwidth）    │  ← モバイル
└─────────────────────────┘
```

**理由**: 右下はコンテンツに被りにくく、視線の自然な終点に近い。モバイルは親指で届きやすい下部。

### 表示時間

| タイプ | 表示時間 | 理由 |
|--------|---------|------|
| Success | 3〜4秒 | 確認だけで十分 |
| Info | 4〜5秒 | 内容を読む時間が必要 |
| Warning | 5〜6秒 | 注意喚起のため長め |
| Error | 手動で閉じるまで | 見落とさせない |

### アニメーション

```
表示: 下からスライドイン（200ms ease-out）
非表示: フェードアウト（150ms ease-in）
```

→ [State Transitions](../states/state-transitions.md) のトランジション原則に従う

## バリアント

### Success（成功）

```
┌──────────────────────────────┐
│ ✓  保存しました              │
└──────────────────────────────┘
背景: success-50、左ボーダー: success-600
```

### Error（エラー）

```
┌──────────────────────────────┐
│ ✕  保存に失敗しました  再試行 │  [×]
└──────────────────────────────┘
背景: error-50、左ボーダー: error-600
手動クローズ必須
```

### 取り消し付き（Undo）

```
┌──────────────────────────────┐
│ 🗑  1件削除しました    元に戻す│
└──────────────────────────────┘
「元に戻す」は5秒以内に操作可能
```

→ 色の定義は [Semantic Colors](../../color/semantic-colors.md) 参照

## 複数トーストの重複

```
✅ 推奨: 新しいものが上に積まれる（最大3件）
❌ 非推奨: 古いものを即時消して新しいものを表示
           → 見落としが発生する
```

## アクセシビリティ

```html
<!-- Success / Info -->
<div role="status" aria-live="polite">
  保存しました
</div>

<!-- Error / Warning（即座に読み上げ） -->
<div role="alert" aria-live="assertive">
  保存に失敗しました
</div>
```

- `role="status"` / `aria-live="polite"`: 他の読み上げが終わってから通知
- `role="alert"` / `aria-live="assertive"`: 即座に割り込んで通知（Errorのみ）
- 手動クローズボタンに `aria-label="通知を閉じる"` を付与

## チェックリスト

- [ ] 位置が一貫している（全画面で右下 or 下部）
- [ ] 表示時間がタイプに応じて適切
- [ ] Errorは手動でしか閉じられない
- [ ] aria-liveが適切（polite / assertive）
- [ ] アイコン + テキストで色に依存していない
- [ ] モバイルでフルwidth表示になっている

## 関連ドキュメント

- [Overview](./overview.md)
- [Inline Validation](./inline-validation.md): フォームエラーはこちら
- [Status States](../states/status-states.md): 状態の定義

## バージョン履歴

| 日付 | バージョン | 変更内容 | 変更理由 |
|------|-----------|----------|----------|
| 2024-02-17 | 1.0.0 | 初版作成 | Phase 2 |
