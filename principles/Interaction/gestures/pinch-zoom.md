# ピンチ・ズーム（Pinch & Zoom）

## メタ情報
- カテゴリ: インタラクション原則 > Gestures
- 適用範囲: Organism〜Page（モバイル）
- ステータス: Approved
- 最終更新: 2024-02-17

## 原則の定義

**ブラウザのデフォルトズームを妨げず、カスタムズームが必要な場合は代替手段も提供する**

## ジェスチャーの定義

```
ピンチイン（Pinch In）:   2本指を近づける → 縮小
スプレッド（Spread Out）: 2本指を広げる  → 拡大
```

## ブラウザのデフォルトズームを尊重する

### viewport の meta タグ

```html
<!-- ✅ ユーザーズームを許可（推奨） -->
<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- ❌ ユーザーズームを禁止（避けるべき） -->
<meta name="viewport" content="width=device-width, initial-scale=1,
  user-scalable=no, maximum-scale=1" />
```

`user-scalable=no` はWCAG 2.1に違反する（達成基準 1.4.4）。視力の弱いユーザーがテキストを拡大できなくなる。

**例外**: 地図・ゲーム等、ズームが操作と競合する場合は、コンテンツ内でズームUIを提供した上で無効化することがある。その場合は十分な代替手段を設計する。

## カスタムピンチズームの実装

地図・画像ビューア等、独自のズーム機能が必要な場合。

### 必ず提供する代替手段

```
✅ ピンチズームに加えて:
- 「+」「-」ボタン
- ダブルタップでズームイン
- リセット（元のサイズに戻る）ボタン
```

### ズームの制限値

```
最小倍率: 0.5x（縮小しすぎると操作不能になる）
最大倍率: 5x（拡大しすぎると迷子になる）
標準: 1x
```

### 慣性とバウンド

```
ピンチ操作後に指を離したとき:
- 最小倍率以下 → 1xまたは最小倍率にアニメーション復帰
- 最大倍率以上 → 最大倍率にアニメーション復帰
- 範囲内 → その倍率を維持

アニメーション: 200ms ease-out
```

## 使う場面・使わない場面

```
✅ カスタムズームが有効:
- 地図（Google Maps等）
- 画像ビューア・ギャラリー
- PDFビューア
- 図面・詳細設計図

❌ カスタムズームが不要（ブラウザデフォルトで十分）:
- 通常のテキストページ
- 一般的なフォームやUI
- ダッシュボード
```

## チェックリスト

- [ ] `user-scalable=no` を使っていない
- [ ] カスタムズームに「+/-」ボタンの代替手段がある
- [ ] ズームの最小・最大倍率を設定している
- [ ] 倍率の境界でアニメーション復帰する

## 関連ドキュメント

- [Overview](./overview.md)
- [Tap](./tap.md): ダブルタップでのズーム
- **[Touch Targets](../../foundation/accessibility/touch-targets.md)**: タッチ操作のサイズ要件

## バージョン履歴

| 日付 | バージョン | 変更内容 | 変更理由 |
|------|-----------|----------|----------|
| 2024-02-17 | 1.0.0 | 初版作成 | Phase 3 |
