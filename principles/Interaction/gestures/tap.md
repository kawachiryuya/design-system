# タップ（Tap）

## メタ情報
- カテゴリ: インタラクション原則 > Gestures
- 適用範囲: Atom〜Organism（モバイル）
- ステータス: Approved
- 最終更新: 2024-02-17

## 原則の定義

**タップはモバイルの最も基本的な操作。必ず即座の視覚フィードバックを返す**

## タップの種類

### シングルタップ（Single Tap）

最も基本的な操作。すべてのインタラクティブ要素の主操作。

```
用途: ボタン押下・リンク移動・選択・チェック
反応時間: 100ms以内にフィードバック（色変化・ripple等）

✅ 必ず実装:
- タッチ開始（touchstart）で視覚フィードバック開始
- タッチ終了（touchend）でアクション実行
```

**タップ領域の確保**:
→ [Touch Targets](../../foundation/accessibility/touch-targets.md) 参照（最小44px × 44px）

### ダブルタップ（Double Tap）

2回素早くタップ。

```
用途:
  ✅ 地図・画像のズームイン
  ✅ SNSの「いいね」（Instagram等の慣習）

⚠️ 注意点:
  - シングルタップと競合しないよう設計する
  - 300ms以内の2回タップをダブルタップと判定
  - ダブルタップ後のシングルタップとの混同を防ぐため、
    シングルタップアクションに300ms遅延が生じる場合がある
    → 重要なアクションにはダブルタップを割り当てない
```

### タップ & ホールド（Long Press）

タップして離さずに保持。

→ [Long Press](./long-press.md) に詳細

## フィードバック

タップに対するフィードバックは必ず3要素で設計する。

```
1. 触覚フィードバック（Haptic）:
   iOS: UIImpactFeedbackGenerator
   Android: VibrationEffect
   → 軽いバイブレーションで「受け付けた」を伝える

2. 視覚フィードバック（Visual）:
   - Rippleエフェクト（Androidスタイル）
   - 背景色の変化（iOS/Web共通）
   - スケールの微変化（scale 0.97）

3. アクション実行:
   - 遷移・状態変化・処理開始
```

**タップ時のCSSフィードバック**:
```css
.tappable {
  /* タップ時のハイライトをカスタム */
  -webkit-tap-highlight-color: transparent;
}

.tappable:active {
  transform: scale(0.97);
  opacity: 0.8;
  transition: transform 100ms ease-in, opacity 100ms ease-in;
}
```

## 誤タップの防止

```
✅ 誤タップが起きにくい設計:
- 破壊的アクション（削除）のボタンは十分な余白を確保
- 隣接する小さなボタンを避ける
- 重要なアクションは確認ステップを挟む

❌ 誤タップが起きやすい設計:
- 「送信」と「キャンセル」が隣接している
- リスト行全体がタップ可能でスクロールと競合する
```

## チェックリスト

- [ ] タップ領域が44px × 44px以上
- [ ] 100ms以内に視覚フィードバック
- [ ] `:active` スタイルが定義されている
- [ ] 破壊的アクションに確認ステップがある
- [ ] ダブルタップはシングルタップと競合しない

## 関連ドキュメント

- [Overview](./overview.md)
- [Long Press](./long-press.md)
- **[Touch Targets](../../foundation/accessibility/touch-targets.md)**: サイズ要件

## バージョン履歴

| 日付 | バージョン | 変更内容 | 変更理由 |
|------|-----------|----------|----------|
| 2024-02-17 | 1.0.0 | 初版作成 | Phase 3 |
