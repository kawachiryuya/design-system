# 整列の原則（Alignment）

## メタ情報
- カテゴリ: レイアウト原則
- 適用範囲: 全階層（Atom〜Page）
- ステータス: Approved
- 最終更新: 2024-02-17

## 原則の定義

**要素をグリッドと共通の軸に揃えることで、秩序と意図を持ったレイアウトをつくる**

整列とは、要素を「なんとなく」配置するのではなく、意図的な軸や基準に沿って配置することです。適切な整列はデザインに秩序をもたらし、情報の関係性を視覚的に伝えます。

## なぜ整列が重要か

```
❌ 整列なし:                ✅ 整列あり:
  タイトル                  タイトル
     本文テキスト           本文テキスト
        ボタン              ボタン
→ 雑然として読みにくい     → 秩序があり読みやすい
```

人間の目は整列された要素をグループとして認識し、逆に整列が崩れると「意図的なのか、ミスなのか」を判断しようとして認知コストが増えます。

## 整列の3種類

### 1. グリッド整列（Grid Alignment）

グリッドのカラムに沿って要素を配置する。最も基本的な整列。

```
12カラムグリッド:
|  |  |  |  |  |  |  |  |  |  |  |  |
[見出し（12col）                       ]
[本文（8col）           ] [サイド(4col)]
[カード(4col)] [カード(4col)] [カード(4col)]
```

グリッドから外れた配置は原則として避ける。

→ [Grid](./grid.md) 参照

### 2. 視覚的整列（Visual Alignment）

複数の要素の端・中央・ベースラインを揃える。

**左揃え（最も基本）**:
```
┌────────────────────────┐
│ 見出し                  │
│ 本文テキストが続きます。 │
│ 次の行も左揃え。        │
│ [ボタン]               │
└────────────────────────┘
左端が揃っているため視線が一直線に動く
```

**中央揃え（限定的に使用）**:
```
        見出し
  本文テキスト（短め）
      [ボタン]

→ ヒーローセクション・カードの中央など短いテキスト向け
→ 長い本文には使わない（読みにくい）
```

**右揃え**:
```
                    数値: 1,234,567
                    数値:   234,567
                    数値:     4,567
→ 数値の桁が揃い比較しやすい
→ テーブルの数値列、価格表示に使用
```

### 3. 光学的整列（Optical Alignment）

数学的に正確な中央よりも、「目で見て中央に見える」位置に調整する。

```
❌ 数学的中央:       ✅ 光学的中央:
┌──────────┐        ┌──────────┐
│          │        │          │
│   [▲]   │        │   [▲]   │
│          │        │          │
└──────────┘        └──────────┘
三角形の重心が      視覚的な重心に合わせて
数学的中央にある    わずかに上にずらす
```

**適用場面**:
- アイコンをボタンやバッジの中央に配置するとき
- 円形のコンテナの中にコンテンツを配置するとき
- ロゴや大きなアイコンを囲む余白の調整

実際の値は1〜4px程度の微調整で十分なことが多い。

## 左揃え・中央揃え・右揃えの使い分け

### 左揃えを基本にする

```
✅ 左揃えを使う場面:
- 本文テキスト（2行以上）
- フォームのラベルと入力フィールド
- リスト・ナビゲーション
- カードの内容

理由: 左端が揃うことで視線の始点が一定になり読みやすい
```

### 中央揃えは「短くて独立したコンテンツ」に限定

```
✅ 中央揃えを使う場面:
- ヒーローセクションの見出し + CTA
- 空状態（Empty State）のイラスト + テキスト
- ダイアログ・モーダルの短いメッセージ
- カードのアイコン + タイトル（1〜2行）

❌ 中央揃えを使わない場面:
- 3行以上の本文テキスト（行頭がバラバラで読みにくい）
- フォーム
- 長いリスト
```

### 右揃えは数値とアクションに

```
✅ 右揃えを使う場面:
- テーブルの数値列
- 価格表示
- 「次へ →」などの方向を示すアクション
- 時刻・日付（テーブル内）
```

## 要素間の整列ルール

### 関連する要素を揃える

```
✅ ラベルと入力フィールドの左端を揃える:
メールアドレス
[                    ]
パスワード
[                    ]

❌ バラバラ:
  メールアドレス
[                    ]
     パスワード
  [                  ]
```

### アイコンとテキストのベースライン整列

```
✅ アイコンをテキストのベースラインに揃える:
[✓] 保存しました    ← アイコンの中心がテキストの中心に揃う

❌ アイコンが上下にずれている:
[✓]
    保存しました
```

実装:
```css
.icon-text {
  display: flex;
  align-items: center;  /* 垂直方向の中央揃え */
  gap: 8px;
}
```

### ボタングループの整列

複数のボタンが並ぶ場合は高さを揃える。

```
✅ 高さが揃っている:
[ Secondary ][ Primary ]

❌ 高さがバラバラ:
[ Secondary      ]
             [ Primary ]
```

→ [Action Placement](../interaction/button/placement.md) 参照

## よくある整列のミス

### 「なんとなく中央」問題

```
❌ 悪い例:
[ロゴ]   見出し   [ボタン]
  ↑       ↑         ↑
 左端    中央      右端
→ 3つの異なる基準が混在

✅ 良い例:
[ロゴ]  見出し         [ボタン]
└─────────────────────────────┘
  同じ水平ベースラインに揃える
```

### 微妙なズレを放置する

```
1〜2px のズレでも積み重なると全体が雑然として見える。
特にコンポーネントの再利用時に起きやすい。

→ デザイントークン（Spacing Scale）を使うことでズレを防ぐ
```

→ [Spacing](./spacing.md) 参照

### モバイルで整列が崩れる

```
デスクトップで整列していても、モバイルで崩れるケース:

❌ 固定幅を使っていると:
[要素A: 200px][要素B: 200px][要素C: 200px]
→ 画面幅が小さいと横にはみ出る

✅ 相対幅（%やfr）を使う:
[要素A: 1fr][要素B: 1fr][要素C: 1fr]
→ どの画面幅でも均等に並ぶ
```

## チェックリスト

- [ ] すべての要素がグリッドのカラムに沿っている
- [ ] 本文テキストは左揃え
- [ ] 中央揃えは短いコンテンツのみ（3行以内）
- [ ] 数値・価格は右揃え
- [ ] アイコンとテキストが `align-items: center` で揃えている
- [ ] モバイルで整列が崩れていない
- [ ] 固定幅ではなく相対幅を使っている

## 関連ドキュメント

- **[Grid](./grid.md)**: グリッドカラムへの整列
- **[Spacing](./spacing.md)**: 整列に使うSpacingスケール
- **[Hierarchy](../foundation/hierarchy.md)**: 整列と視覚的ヒエラルキーの関係
- **[Action Placement](../interaction/button/placement.md)**: ボタンの整列

## バージョン履歴

| 日付 | バージョン | 変更内容 | 変更理由 |
|------|-----------|----------|----------|
| 2024-02-17 | 1.0.0 | 初版作成 | Phase 3 |
