# グリッドシステムの原則

## メタ情報
- カテゴリ: レイアウト原則
- 適用範囲: Organism〜Page
- ステータス: Approved
- 最終更新: 2024-01-15

## 原則の定義

**12カラムグリッドとあらかじめ定義されたブレークポイントを使って要素を配置し、恣意的なピクセル指定を避ける**

グリッドは画面を分割する見えない骨格です。デザイナーと開発者が共通の座標系を持つことで、意図通りのレイアウトを再現性高く実装できます。

## なぜグリッドが必要か

グリッドなしで要素を配置すると:

- **位置の根拠がない**: 「なんとなく」の配置が積み重なる
- **再現性がない**: デザイナーの意図を開発者が正確に実装できない
- **一貫性が崩れる**: ページごとに微妙に異なるレイアウトになる
- **レスポンシブ対応が困難**: 画面サイズ変化の予測が立てにくい

## グリッドの構成要素

```
┌─M─┬─C─┬─G─┬─C─┬─G─┬─C─┬─M─┐
│   │col│   │col│   │col│   │
│   │   │   │   │   │   │   │
└───┴───┴───┴───┴───┴───┴───┘

M = Margin（画面端の余白）
C = Column（コンテンツを配置する縦の帯）
G = Gutter（カラム間の余白）
```

## ブレークポイント

### 定義

```typescript
const breakpoints = {
  xs:  '0px',     // モバイル（デフォルト）
  sm:  '640px',   // 大きめのモバイル、横持ち
  md:  '768px',   // タブレット
  lg:  '1024px',  // デスクトップ
  xl:  '1280px',  // 大画面
};
```

### ブレークポイント別のグリッド設定

| 名前 | 画面幅 | 想定デバイス | カラム数 | ガター | マージン |
|------|--------|------------|---------|-------|---------|
| xs | 〜639px | スマートフォン（縦） | 4 | 16px | 16px |
| sm | 640〜767px | スマートフォン（横） | 8 | 16px | 24px |
| md | 768〜1023px | タブレット | 12 | 24px | 32px |
| lg | 1024〜1279px | デスクトップ | 12 | 24px | 48px |
| xl | 1280px〜 | 大型ディスプレイ | 12 | 32px | 64px |

### モバイルファースト

**原則**: デフォルトをモバイル（xs）として設計し、大きい画面へ順に拡張する

```css
/* ✅ モバイルファースト（推奨） */
.element {
  width: 100%;         /* xs: デフォルト */
}
@media (min-width: 768px) {
  .element {
    width: 50%;        /* md以上 */
  }
}

/* ❌ デスクトップファースト（非推奨） */
.element {
  width: 50%;
}
@media (max-width: 767px) {
  .element {
    width: 100%;
  }
}
```

**理由**: モバイルから設計することで、限られた画面に本当に必要な情報が絞られる。後から拡張する方が、後から削減するより設計しやすい。

### ブレークポイント外の値を使わない

```css
/* ❌ 悪い例 */
@media (min-width: 850px) { ... }
@media (min-width: 920px) { ... }

/* ✅ 良い例 */
@media (min-width: 768px) { ... }   /* md */
@media (min-width: 1024px) { ... }  /* lg */
```

## カラムシステム

### なぜ12カラムか

12は 2、3、4、6 で割り切れるため、多様なレイアウトを等分で表現できます。

```
全幅:         [ 12カラム                        ]
2分割:        [ 6カラム         ] [ 6カラム     ]
3分割:        [ 4カラム   ] [ 4カラム ] [ 4カラム]
4分割:        [3カラム] [3カラム] [3カラム] [3カラム]
サイドバー:   [ 3カラム ] [ 9カラム              ]
広いサイド:   [ 4カラム   ] [ 8カラム          ]
```

### よく使うパターン

#### コンテンツ + サイドバー

```
lg以上:
┌──────────────────────┬──────────┐
│  コンテンツ（9col）   │ サイド   │
│                      │ (3col)   │
└──────────────────────┴──────────┘

md以下:
┌──────────────────────────────────┐
│  コンテンツ（12col）              │
└──────────────────────────────────┘
┌──────────────────────────────────┐
│  サイドバー（12col）              │
└──────────────────────────────────┘
```

#### カードグリッド

```
xl:  4列（各3col）
lg:  3列（各4col）
md:  2列（各6col）
sm以下: 1列（12col）
```

#### フォーム

```
lg以上: フォーム本体（6col）+ 余白（6col）
md以下: フォーム本体（12col）全幅
```

### コンテナのmax-width

コンテンツが広がりすぎないよう、コンテナに最大幅を設定します。

```css
.container {
  width: 100%;
  margin: 0 auto;
}

/* ブレークポイント別max-widthとpadding */
.container {
  padding: 0 16px;   /* xs: マージン16px */
}
@media (min-width: 640px) {
  .container { padding: 0 24px; }
}
@media (min-width: 768px) {
  .container { max-width: 768px; padding: 0 32px; }
}
@media (min-width: 1024px) {
  .container { max-width: 1024px; padding: 0 48px; }
}
@media (min-width: 1280px) {
  .container { max-width: 1280px; padding: 0 64px; }
}
```

## ガター（列間の余白）

ガターはカラム間の余白です。Spacingスケールに準拠した値を使います。

| ブレークポイント | ガター | Spacingトークン |
|--------------|-------|--------------|
| xs / sm | 16px | spacing-4 |
| md / lg | 24px | spacing-6 |
| xl | 32px | spacing-8 |

### ガターとコンポーネント間の余白の違い

```
ガター: グリッドカラム間の固定余白（CSS Gridのgapで管理）
コンポーネント間: コンテンツに応じた余白（Spacingの原則で判断）

→ ガターはグリッドが管理し、コンポーネント側で上書きしない
```

→ 余白の詳細は [Spacing](./spacing.md) 参照

## よくあるレイアウト変化パターン

### 縦並び → 横並び

```
モバイル:            デスクトップ:
┌──────────┐         ┌────┐ ┌────┐ ┌────┐
│  カード1  │         │ C1 │ │ C2 │ │ C3 │
└──────────┘         └────┘ └────┘ └────┘
┌──────────┐
│  カード2  │
└──────────┘
```

### ナビゲーションの変化

```
モバイル:            デスクトップ:
┌──────────┐         ┌────────────────────┐
│ ☰ ロゴ  │         │ロゴ  項目A 項目B [CTA]│
└──────────┘         └────────────────────┘
```

## チェックリスト

- [ ] ブレークポイントは定義された5値のみ使用
- [ ] モバイルファーストで設計（min-width使用）
- [ ] カラム幅が12の約数（2, 3, 4, 6, 12）に基づいている
- [ ] ガターがSpacingスケールの値（16, 24, 32px）
- [ ] コンテナにmax-widthが設定されている
- [ ] 各ブレークポイントで意図したレイアウトになっている

## 関連原則

- **[Spacing](./spacing.md)**: ガターとマージンはSpacingスケールに準拠
- **[Hierarchy](../../foundation/hierarchy.md)**: グリッドは視覚的ヒエラルキーを支える骨格
- **[Consistency](../../foundation/consistency.md)**: グリッドにより一貫したレイアウトを実現

## バージョン履歴

| 日付 | バージョン | 変更内容 | 変更理由 |
|------|-----------|----------|----------|
| 2024-01-15 | 1.0.0 | 初版作成 | Phase 2 |
