# ネイティブパターン

## メタ情報
- カテゴリ: プラットフォーム原則 > Mobile
- 適用範囲: Organism〜Page
- ステータス: Approved
- 最終更新: 2024-02-17

## 原則の定義

**プラットフォームの慣習に従い、ユーザーが既に知っている操作パターンを尊重する**

## プラットフォーム慣習の重要性

```
ユーザーは、他のアプリで学んだ操作をそのまま使おうとする。

✅ 慣習に従う:
- 学習コストが低い
- 操作の迷いがない
- プラットフォームの更新に自動追従

❌ 独自パターンを作る:
- ユーザーが混乱する
- 操作を教える必要がある
- プラットフォームの進化から取り残される
```

## iOS vs Android の主要な違い

| 要素 | iOS | Android |
|------|-----|---------|
| **戻る操作** | 画面左端から右スワイプ | 戻るボタン（物理/ジェスチャー） |
| **メニュー** | 画面下部タブバー | 画面下部タブバー / ドロワー |
| **主要アクション** | 画面右上ボタン | FAB（右下の円形ボタン） |
| **通知** | 画面上部トースト | Snackbar（画面下部） |
| **モーダル** | 画面下部から上にスライド | 画面中央にフェードイン |
| **スワイプアクション** | 左スワイプで削除 | 左右どちらも可 |

## ナビゲーションパターン

### タブナビゲーション（両OS共通）

```
配置: 画面下部固定
項目数: 3〜5個
アイコン + ラベルのセット

┌────────────────────────────────┐
│         メインコンテンツ        │
├────────────────────────────────┤
│  🏠      🔍      ＋      🔔      👤  │
│ ホーム  検索   投稿   通知  プロフ  │
└────────────────────────────────┘
```

→ [Navigation](../../patterns/navigation.md) 参照

### ドロワーナビゲーション（Android主流）

```
[☰] タップ → 左から引き出し

┌──────────┬──────────────────────────┐
│ 📷 ユーザー │                          │
│─────────│                          │
│ ホーム    │    メインコンテンツ        │
│ 設定     │                          │
│ ログアウト │                          │
└──────────┴──────────────────────────┘
```

iOS版でも使えるが、iOSユーザーには「左端スワイプ = 戻る」が染み付いているため注意。

### モーダル（iOS / Android）

**iOS**: 画面下部から上にスライドイン
```
┌────────────────────────────────┐
│                                │ ↓ スワイプダウンで閉じる
│  ⎯  （ハンドル）               │
│                                │
│  モーダルコンテンツ             │
│                                │
└────────────────────────────────┘
```

**Android**: 中央にフェードイン
```
     ┌────────────────────┐
     │  モーダルコンテンツ  │
     │                    │
     │  [キャンセル] [OK] │
     └────────────────────┘
```

## スワイプアクション

### iOS

```
左スワイプ → 削除（主流）
右スワイプ → アーカイブ・既読等

┌──────────────────────────────┐
│ メール件名            [削除] │ ← 左スワイプで表示
└──────────────────────────────┘
```

### Android

```
左右どちらもカスタマイズ可能

Material Designでは:
左スワイプ → アーカイブ
右スワイプ → スヌーズ
```

→ [Gestures: Swipe](../../interaction/gestures/swipe.md) 参照

## フォームの違い

### 日付選択

**iOS**: ドラム型ピッカー（回転して選ぶ）
**Android**: カレンダー型ピッカー

```html
<input type="date" />
<!-- プラットフォームのネイティブUIが表示される -->
```

### セレクト（選択）

**iOS**: 画面下部からピッカー
**Android**: ドロップダウン or ダイアログ

```html
<select>
  <option>選択肢1</option>
  <option>選択肢2</option>
</select>
```

## アクションボタンの配置

### iOS

```
モーダル:
[キャンセル]          [完了]
 ↑ 左              ↑ 右（Primary）

ページ:
               [保存] ← 右上

理由: 親指が届きやすい右下・右上
```

### Android

```
モーダル:
          [キャンセル] [OK]
                ↑ 右側に並ぶ

FAB: 右下固定
[＋] ← 主要アクション

理由: Material Designの慣習
```

→ [Button: Placement](../../interaction/button/placement.md) 参照

## トーストとSnackbar

### iOS Toast

```
配置: 画面上部（ステータスバー下）
表示時間: 3〜4秒
アクション: なし（通知のみ）

┌────────────────────────────────┐
│  ✓ 保存しました                 │
└────────────────────────────────┘
```

### Android Snackbar

```
配置: 画面下部
表示時間: 4〜7秒
アクション: 最大1つ（「元に戻す」等）

┌────────────────────────────────┐
│  削除しました    [元に戻す]     │
└────────────────────────────────┘
```

→ [Toast Notifications](../../interaction/feedback/toast-notifications.md) 参照

## 長押し（Long Press）

### iOS

```
用途:
- コンテキストメニュー
- Peek & Pop（3D Touch対応機種）
- 編集モードへの切り替え

判定時間: 500ms前後
```

### Android

```
用途:
- コンテキストメニュー
- 選択モード（複数選択）

判定時間: 500ms前後
```

→ [Gestures: Long Press](../../interaction/gestures/long-press.md) 参照

## 文字入力の違い

### キーボード

**iOS**: 角丸・淡い背景
**Android**: 平坦・Material Design

```html
<input type="email" />   → @が出やすいキーボード
<input type="tel" />     → 数字キーボード
<input type="url" />     → .comが出やすいキーボード
```

適切な `type` 属性を使うことで、プラットフォームに応じたキーボードが表示される。

### オートコンプリート

```html
<input type="email" autocomplete="email" />
<input type="tel" autocomplete="tel" />
```

プラットフォームのパスワードマネージャー・入力候補が機能する。

## プラットフォーム別の実装分岐

```javascript
// iOS判定
const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent);

// Android判定
const isAndroid = /Android/.test(navigator.userAgent);

if (isIOS) {
  // iOS向けの処理
  showModalFromBottom();
} else if (isAndroid) {
  // Android向けの処理
  showModalWithFade();
}
```

**注意**: 可能な限りプラットフォーム分岐を避け、両方で動作するパターンを選ぶ。

## チェックリスト

- [ ] タブナビゲーションは画面下部
- [ ] FAB（Android）は右下
- [ ] モーダルの表示方法がプラットフォームに応じている
- [ ] スワイプアクションが慣習に沿っている
- [ ] トースト/Snackbarの配置が適切
- [ ] `<input type>` が適切（キーボード最適化）
- [ ] `autocomplete` 属性を設定

## 関連ドキュメント

- [iOS](./ios.md): iOS固有の実装
- [Android](./android.md): Android固有の実装
- **[Navigation](../../patterns/navigation.md)**: ナビゲーションパターン
- **[Button: Placement](../../interaction/button/placement.md)**: ボタン配置
- **[Gestures](../../interaction/gestures/overview.md)**: ジェスチャー
- **[Toast Notifications](../../interaction/feedback/toast-notifications.md)**: 通知
- **[Forms](../../patterns/forms.md)**: フォーム設計

## バージョン履歴

| 日付 | バージョン | 変更内容 | 変更理由 |
|------|-----------|----------|----------|
| 2024-02-17 | 1.0.0 | 初版作成 | Phase 4 |
