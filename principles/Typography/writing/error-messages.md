# エラーメッセージ

## メタ情報
- カテゴリ: コンテンツ原則 > Writing
- 適用範囲: Atom〜Page
- ステータス: Approved
- 最終更新: 2024-02-17

## 原則の定義

**エラーメッセージは「何が問題か」「なぜ起きたか」「どうすれば直るか」を伝え、ユーザーが次のアクションを取れるようにする**

エラーはユーザーにとって最もフラストレーションが高い瞬間です。適切なエラーメッセージはその体験を「問題があったが解決できた」に変えます。

## エラーメッセージの3要素

すべてのエラーに含めるべき情報:

```
1. 何が問題か（What）
   「パスワードが正しくありません」

2. なぜ起きたか（Why）※省略可
   「大文字と小文字は区別されます」

3. どうすれば直るか（How）
   「もう一度入力してください」
```

3つをまとめた例:
```
✅ 良い例:
「パスワードが正しくありません。
  大文字と小文字を確認してもう一度お試しください。」

❌ 悪い例:
「エラーが発生しました」（何も情報がない）
「無効な入力です」（何が無効か分からない）
```

## エラーの種類別ガイドライン

### ユーザー入力エラー（バリデーション）

ユーザーのミスが原因。責める表現を避け、修正方法を示す。

```
✅ 良い例:
「メールアドレスの形式が正しくありません（例: user@example.com）」
「パスワードは8文字以上で入力してください（現在: 5文字）」
「電話番号は数字とハイフンのみ使用できます」

❌ 悪い例:
「無効なメールアドレスです」
「パスワードが短すぎます」
「不正な文字が含まれています」
```

**原則**: ユーザーのせいにする言葉（「間違っています」「不正です」）は避ける。

### システムエラー（サーバー・ネットワーク）

システム側の問題。謝罪 + 再試行を促す。技術的詳細は見せない。

```
✅ 良い例:
「保存できませんでした。しばらく経ってから再度お試しください。」
「通信エラーが発生しました。インターネット接続を確認して再試行してください。」
「現在サービスに問題が発生しています。復旧まで今しばらくお待ちください。」

❌ 悪い例:
「500 Internal Server Error」（技術的すぎる）
「エラーコード: DB_CONNECTION_TIMEOUT」（ユーザーには無意味）
「不明なエラーが発生しました」（何も伝わらない）
```

**ポイント**: 復旧の見込みが分かる場合は伝える。ステータスページへのリンクも有効。

### 権限エラー

アクセス権限がない場合。何ができないか + 代替手段を示す。

```
✅ 良い例:
「このページを表示する権限がありません。
  管理者にお問い合わせいただくか、別のアカウントでログインしてください。」

「このファイルを編集するには、編集権限が必要です。
  オーナーに権限をリクエストする [リクエストを送る]」

❌ 悪い例:
「403 Forbidden」
「アクセスが拒否されました」（次に何をすればいいか分からない）
```

### 空・未入力エラー

必須項目が空の場合。何を入力すべきか明示する。

```
✅ 良い例:
「メールアドレスを入力してください」
「お名前を入力してください」

❌ 悪い例:
「必須項目です」（どの項目が必須なのかフォームから離れると分からない）
「入力してください」（何を入力するか不明）
```

## トーンの注意点

### ユーザーを責めない

```
❌ 責める:
「パスワードを間違えました」
「無効な形式で入力されました」

✅ 中立・建設的:
「パスワードが一致しませんでした」
「メールアドレスの形式を確認してください」
```

### 感嘆符・強調を多用しない

```
❌ 過剰:
「エラー！！入力内容に問題があります！！」

✅ 落ち着いたトーン:
「入力内容を確認してください」
```

### 謝罪のバランス

```
ユーザー入力エラー: 謝罪不要（ユーザー側の修正が必要）
システムエラー: 「申し訳ありません」または「ご不便をおかけしています」

❌ 過剰な謝罪:
「大変申し訳ございません。誠に恐れ入りますが...」（重すぎる）

✅ 適切:
「申し訳ありません、保存できませんでした。」
```

## エラーメッセージの長さ

```
フォームのインラインエラー: 1文（30文字以内が理想）
トースト通知: 1〜2文
モーダル・ページエラー: 2〜3文（+アクションボタン）
```

→ [Inline Validation](../../interaction/feedback/inline-validation.md) 参照  
→ [Toast Notifications](../../interaction/feedback/toast-notifications.md) 参照

## チェックリスト

- [ ] 「何が問題か」が明確
- [ ] 「どうすれば直るか」が含まれている
- [ ] ユーザーを責める表現がない
- [ ] 技術的なエラーコードをそのまま見せていない
- [ ] システムエラーに再試行 or 代替手段を示している
- [ ] 感嘆符や過剰な強調がない
- [ ] 1〜2文に収まっている（ページエラーは最大3文）

## 関連ドキュメント

- [Tone & Voice](./tone-voice.md): 文章全体のスタンス
- [Microcopy](./microcopy.md): UI内の短いテキスト全般
- **[Inline Validation](../../interaction/feedback/inline-validation.md)**: フォームエラーの表示
- **[Toast Notifications](../../interaction/feedback/toast-notifications.md)**: トーストでのエラー表示
- **[Semantic Colors](../../color/semantic-colors.md)**: エラーの色

## バージョン履歴

| 日付 | バージョン | 変更内容 | 変更理由 |
|------|-----------|----------|----------|
| 2024-02-17 | 1.0.0 | 初版作成 | Phase 3 |
